@model Roulette.Models.TableModel

@{
    ViewBag.Title = "Roulette Admin";
}

@section Head
{
     <script type="text/javascript" src="/Scripts/Custom/highlighter.js"></script>
     <script type="text/javascript" src="/Scripts/Custom/stake.js"></script>
     <script type="text/javascript">
         function getStakes() {
             setTimeout(function () {
                 $.ajax({
                     type: "POST",
                     url: '/Stake/GetStakes',
                     dataType: 'html',
                     success: function (stakesList) {
                         if (stakesList == "") {
                             $('.roulette-board div.chip').remove();
                             $('#zero div.chip').remove();
                             stakes = new Array();
                         }
                         getStakes();
                     }
                 });
             }, 400);
         }

         function setRoundNumber() {
             setTimeout(function () {
                 getRoundNumber();
                 setRoundNumber();
             }, 2000);
         }

         $(function () {
             $.ajax({
                 type: "POST",
                 url: '/Stake/RememberCurrentState',
                 data: { currentState: "" }
             });

             $("#cancel-button").click(function () {
                 $.ajax({
                     type: "POST",
                     url: '/Stake/RememberCurrentState',
                     data: { currentState: "" },
                     success: function () {
                         stakes = new Array();
                         $('.roulette-board div.chip').remove();
                         $('#zero div.chip').remove();
                     }
                 });
             });

             $("#submit-button").click(function () {

                 $.ajax({
                     type: "POST",
                     url: '/Stake/CreateStake',
                     contentType: 'application/json',
                     data: JSON.stringify(stakes),
                     success: function () {
                         stakes = new Array();
                         $('.roulette-board div.chip').remove();
                         $('#zero div.chip').remove();

                     }
                 });

                 window.open("/checkPage.htm", "_blank");

             });

             getStakes();
             setRoundNumber();
             setProgressBar();
         });
     </script>
}

<div id="admin-board">

<div id="buttons">
<input type="button" value="Clear" id="cancel-button"/>
<input type="button" value="Submit" id="submit-button" />
</div>

<div id="centered-div">
@Html.Partial("_Board", Model)
</div>

<div class="roulette-chips">
<div class="chip" data-value="1">
<img src="/img/red-chip.png" alt="1"/>
<div class="text">1</div>
</div>
<div class="chip" data-value="2">
<img src="/img/purple-chip.png" alt="2"/>
<div class="text">2</div>
</div>
<div class="chip" data-value="5">
<img src="/img/blue-chip.png" alt="5"/>
<div class="text">5</div>
</div>
<div class="chip" data-value="10">
<img src="/img/orange-chip.png" alt="10"/>
<div class="text">10</div>
</div>
</div>
</div>